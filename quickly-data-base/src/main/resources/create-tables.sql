
---
--- CREATION DES TABLE
---
CREATE TABLE AGENT (
  MATRICULE INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  PROFIL VARCHAR(6) NOT NULL,
  NOM VARCHAR(100) NOT NULL,
  PRENOM VARCHAR(100) NOT NULL,
  COURRIEL VARCHAR(200) NOT NULL
);

CREATE TABLE CLIENT (
  NUMERO INTEGER  GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  NOM VARCHAR(100) NOT NULL,
  PRENOM VARCHAR(100) NOT NULL,
  TELEPHONE VARCHAR(20) NOT NULL,
  REGION VARCHAR(6) NOT NULL
);

CREATE TABLE CONTRAT (
  NUMERO INTEGER NOT NULL,
  PRODUIT VARCHAR(100) NOT NULL,
  DATE_SIGNATURE DATE,
  DATE_EFFET DATE
);

CREATE TABLE PROSPECT (
  CLIENT INTEGER NOT NULL,
  AGENT INTEGER NOT NULL,
  DATE_CONTACT DATE
);

CREATE TABLE TEXTES (
  CATEGORIE VARCHAR(10) NOT NULL,
  CODE VARCHAR(6) NOT NULL,
  LANGUE VARCHAR(2) NOT NULL,
  TEXTE VARCHAR(200) NOT NULL
);


---
--- CREATION DES CLEFS PRIMAIRES
---
alter table AGENT add primary key (MATRICULE);
alter table CLIENT add primary key (NUMERO);
alter table CONTRAT add primary key (NUMERO, PRODUIT);
alter table PROSPECT add primary key (CLIENT);
alter table TEXTES add primary key (CATEGORIE, CODE, LANGUE);

---
--- CREATION DE CLEFS ETRANGERES
---
alter table CONTRAT add constraint FK_CONTRAT_NUMERO foreign key(NUMERO) references CLIENT(NUMERO);
alter table PROSPECT add constraint FK_PROSPECT_CLIENT foreign key(CLIENT) references CLIENT(NUMERO);
alter table PROSPECT add constraint FK_PROSPECT_AGENT foreign key(AGENT) references AGENT(MATRICULE);

